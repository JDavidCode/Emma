# BasePythonLibraries
import logging
import time
from threading import Thread
from concurrent.futures import ThreadPoolExecutor

# ImportedPythonLibraries
# AppLibraries
import amy_basic_process.tools_module as tools
import amy_basic_process.voice_module as vM
import amy_basic_process.data_module as dM
import amy_basic_process.task_module as tK


class Cores:
    def __init__(self) -> None:
        pass

    def MainCore():
        input_ = vM.ListenInBack.Listener()
        ToolKit = tools.miscellaneousTools
        dTools = tools.DataTools
        rTools = tools.rootTools
        talk = vM.talkProcess
        db = dM.AmyData
        data = ToolKit.strClearer(input_)

        print(input_)

        eAns, task, indexer, loader = db.taskIndexer(data)
        chatIndexer = db.chatIndexer(data)

        # Chat
        if data != chatIndexer:
            talk.talk(chatIndexer)
        # Task
        elif loader == True:
            talk.talk(eAns)
            eval(task)
        else:
            pass

    def dataAutoUpdater():
        dM.AmyData.jsonTaskUpdater()


if __name__ == '__main__':
    worker = ThreadPoolExecutor(max_workers=4)
    while True:
        worker.submit(Cores.dataAutoUpdater())
        worker.submit(Cores.MainCore())
